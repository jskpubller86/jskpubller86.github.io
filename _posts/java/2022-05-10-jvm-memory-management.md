---
title : JVM 메모리 구조
categories : java  memory
---

자바는 JVM에서 실행된다. 

JVM이 실행되면 시스템에서 메모리를 할당받고 관리한다. 

JVM은 다음과 같은 구조로 메모리를 관리한다.

![jvm 메모리 구조](/assets/svg/jvm-memory.drawio.svg)


## 2. 메모리 구조 설명

### 2.1. 메소드 영역

로딩된 클래스의 메타 정보를 저장한다.

클래스를 이용해 인스턴스를 생성시 메소드 영역에 있는 클래스 정보를 복사하여 힙 영역에 저장한다.

JVM 메모리 영역 중 가장 먼저 데이터가 저장되는 곳이다.

### 2.2. 스택 영역

메소드가 호출될 때 메소드 정보를 저장하는 영역이다. 

메소드 실행이 끝나면 저장된 정보는 삭제된다. 

저장되는 메소드 정보에는 매개 변수, 지역 변수,  복귀 주소 등이 있다. 

스택은 LIFO(Last In First Out) 방식을 가진다.

### 2.3. 힙 영역

클래스를 통한 인스턴스 생성시 저장되는 영역이다.

힙 영역은 여러 개의 영역으로 나누어져 있는데 이유는 메모리를 효율적으로 관리하기 위해서이다. 

#### 2.3.1. Young Generation

새롭게 생성된 인스턴스가 저장되는 영역이다.

빈번하게 사용되는 데이터(인스턴스)는 Young 영역에서 Old 영역으로 보낸다.

Young Generation에서는 빈번하게 GC가 발생하는데 이를 Minor GC라고 한다.

#### 2.3.2. Old Generation

Young 영역에서 빈번하게 사용되는 데이터(인스턴스)가 저장되는 영역이다.

Young 보다는 GC가 발생하는 횟수가 적다. 

Old 영역에서 발생하는 GC를 Major GC라고 한다.

#### 2.3.3. Permanent 영역

애플리케이션에서 사용되는 클래스의 정보를 저장하는 영역이다. 

메서드 영역의 클래스를 복사한 정보를 저장한다.

### 2.4. 레지스터 영역

현재 JVM이 수행할 명령어의 주소를 저장하는 메모리 공간이다.

### 2.5. 네이티브 메소드 스택 영역

OS의 시스템 정보, 리소스를 사용하거나 접근하기 위한 코드를 저장하는 영역으로 보통 C, C++로 작성한다.

JNI API를 통해서 실행된다.



